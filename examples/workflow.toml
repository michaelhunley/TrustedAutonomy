# .ta/workflow.toml — Submit adapter configuration for Trusted Autonomy.
#
# Copy this file to your project's .ta/ directory:
#   mkdir -p .ta && cp examples/workflow.toml .ta/workflow.toml
#
# Without this file, `ta pr apply` only copies files back to your project.
# With it, apply can automatically commit, push, and open a PR.

[submit]
adapter = "git"          # "git" or "none" (default: "none")
auto_commit = true       # Commit on every `ta pr apply`
auto_push = true         # Push to remote after commit
auto_review = true       # Open a PR/review after push (requires `gh` CLI)

[submit.git]
branch_prefix = "ta/"              # Branch naming: ta/<goal-slug>
target_branch = "main"             # PR target branch
merge_strategy = "squash"          # squash, merge, or rebase
remote = "origin"                  # Git remote name
pr_template = ".ta/pr-template.md" # PR body template (see examples/pr-template.md)

# ────────────────────────────────────────────────────────────────────
# Diff Viewing Configuration (v0.2.2)
# ────────────────────────────────────────────────────────────────────

[diff]
# Open files in external handlers by default when using `ta pr view --file`
# If false, always show inline diffs (or [binary: size] for binaries)
# CLI flag --open-external / --no-open-external overrides this setting
open_external = true

# Optional: Override default path to diff-handlers.toml
# handlers_file = ".ta/diff-handlers.toml"

# ────────────────────────────────────────────────────────────────────
# Draft Lifecycle / Garbage Collection Configuration (v0.3.6)
# ────────────────────────────────────────────────────────────────────

[gc]
# Days after which terminal-state drafts' staging dirs are eligible for cleanup.
# Affects `ta draft gc`. Default: 7.
stale_threshold_days = 7

# Show a one-line warning on `ta` startup if stale drafts exist
# (approved but not applied for 3+ days). Default: true.
health_check = true
