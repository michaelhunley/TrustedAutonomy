## v0.4.1-alpha

### New Features

- **Macro Goal Sessions** — Keep agents alive in a single session while decomposing work into reviewable sub-goals. Start with `ta run "title" --source . --macro`; the agent receives MCP tools (`ta_draft`, `ta_goal`, `ta_plan`) for inner-loop iteration without exit/restart cycles.
- **Sub-Goal Decomposition** — Agents can create and manage sub-goals within a macro session. Each sub-goal produces its own reviewable draft. Blocking mode (default) ensures every step is reviewed before the agent continues.
- **Intent-to-Access Planner & Alignment Profiles** — Agents declare operational boundaries via structured YAML `alignment` blocks (principal, autonomy envelope, forbidden actions, escalation triggers). The new Policy Compiler enforces these as capability grants at runtime.
- **ReviewChannel Architecture** — Pluggable abstraction for bidirectional human–agent communication. Ships with `TerminalChannel` (interactive stdin/stdout) and `AutoApproveChannel` (batch/CI mode). Future adapters (Slack, Discord, email) plug in via the same trait.
- **Interactive Terminal Sessions** — In-terminal macro goal workflow where the agent pauses for human input inline: approve `[a]`, reject `[r]`, discuss `[d]`, or view diff `[v]`. Includes plan-update proposals with human approval gates.
- **Follow-Up Draft Continuity** — `--follow-up` now reuses the parent goal's staging directory by default, so iterative work accumulates into a single unified draft. Standalone mode available if you decline.
- **Configurable Summary Exemption** — `.ta/summary-exempt` accepts `.gitignore`-style patterns to control which files require change summaries, replacing hardcoded logic.
- **Follow-Up Configuration** — New `[follow_up]` section in `workflow.toml` with `default_mode`, `auto_supersede`, and `rebase_on_apply` options.

### Improvements

- **Draft list UI** — Macro goals show `[M]` prefix; sub-goal drafts show `└` hierarchy indicator.
- **Draft view layout** — Improved formatting and added documentation distinguishing approve vs apply.
- **Rebase-on-Apply** — When applying a follow-up draft after the source has changed, TA automatically re-snapshots the source for safe sequential application.
- **Auto-supersede scoping** — Follow-up drafts only supersede the parent when both share the same staging directory; standalone follow-ups leave the parent independently reviewable.
- **Standards alignment** — Phases satisfy IEEE 3152-2024, ISO/IEC 42001, and NIST AI 600-1 requirements for human–AI configuration and communication.
- **Usage documentation** — Comprehensive new section on interactive terminal sessions with realistic examples and troubleshooting.

### Bug Fixes

- Fixed panic in `ta draft list` on multi-byte UTF-8 characters (em dash rendering).
- Fixed auto-close behavior: parent drafts are only auto-closed when the follow-up shares the same staging directory, preventing orphaned independent work.
